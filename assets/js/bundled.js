const menu=document.getElementById("menu-page");const content=document.getElementById("content");function close_menu(){menu.style.visibility="hidden";content.style.visibility="visible";content.style.display="block"}function show_menu(){menu.style.visibility="visible";content.style.visibility="hidden";content.style.display="none"}function toggle_submenu(i){if(!window.event.ctrlKey){item=document.getElementsByClassName('has-submenu')[i];item_link=document.getElementsByClassName('submenu-link')[i];item_link_icon=document.getElementsByClassName('submenu-link-icon')[i];submenu=document.getElementsByClassName('submenu')[i];if(item.classList.contains("submenu-active")){item.classList.remove("submenu-active");item_link.classList.remove("submenu-link-active");item_link_icon.classList.remove("fa-angle-up-png");item_link_icon.classList.add("fa-angle-down-png");submenu.style.display="none"}else {item.classList.add("submenu-active");item_link.classList.add("submenu-link-active");item_link_icon.classList.add("fa-angle-up-png");item_link_icon.classList.remove("fa-angle-down-png");submenu.style.display="flex"}}}const root_item=document.querySelector(":root");let cycle_hue_vars=["--rnbw-color"];const cycle_mode_focus=0,cycle_mode_mouse=1;let current_hue=100,hue_translate=1,cycle_hue_active=0,active_hue_listeners=0,cycle_hue_count=0,cycle_hue_mode=cycle_mode_focus,cycle_hue_sleep=500;function cycle_hue_sleep_fn(ms){return new Promise(resolve=>setTimeout(resolve,ms));}function hsla_string(h,p,o){return"hsl("+h+"deg,"+p+"%,"+p+"%,"+o+")"}function hsl_string(h,p){return"hsl("+h+"deg,"+p+"%,"+p+"%)"}function hsl_rainbow(h){return"hsl("+h+"deg, 50%, 50%)"}function hsl_sherbet(h){return"hsl("+h+"deg, 75%, 75%)"}function filter_string(h){return"invert(66%) sepia(32%) saturate(812%) hue-rotate("+h+"deg) brightness(92%) contrast(92%)"}function iterate_hue(){current_hue=(current_hue+hue_translate)%360;for(let i=0,t=0;t<360;++i,t+=30)root_item.style.setProperty("--rnbw-color-"+i,hsl_rainbow((current_hue+t)%360));root_item.style.setProperty("--rnbw-color",hsl_rainbow(current_hue));root_item.style.setProperty("--rnbw-color-hover",hsl_rainbow((current_hue+180)%360));}async function start_cycling_hue(){if(++cycle_hue_count===1){cycle_hue_active=1;while(cycle_hue_active){iterate_hue();await cycle_hue_sleep_fn(cycle_hue_sleep);}}--cycle_hue_count}function stop_cycling_hue(){cycle_hue_active=0}function add_cycle_hue_listeners(){if(cycle_hue_mode===cycle_mode_focus){active_hue_listeners=1;window.addEventListener("focus",start_cycling_hue);window.addEventListener("blur",stop_cycling_hue);}else if(cycle_hue_mode===cycle_mode_mouse){active_hue_listeners=1;document.getElementById("body").addEventListener("mouseenter",start_cycling_hue);document.getElementById("body").addEventListener("mouseleave",stop_cycling_hue);}}function remove_cycle_hue_listeners(){if(!active_hue_listeners){alert("no active hue listeners");return}else if(cycle_hue_mode===cycle_mode_focus){active_hue_listeners=0;window.removeEventListener("focus",start_cycling_hue);window.removeEventListener("blur",stop_cycling_hue);}else if(cycle_hue_mode===cycle_mode_mouse){active_hue_listeners=0;document.getElementById("body").removeEventListener("mouseenter",start_cycling_hue);document.getElementById("body").removeEventListener("mouseleave",stop_cycling_hue);}}function set_cycle_mode(mode){if(mode===cycle_hue_mode)alert("cycle hue mode is already '"+mode+"'");else if(mode===cycle_mode_focus||mode===cycle_mode_mouse){remove_cycle_hue_listeners();cycle_hue_mode=mode;add_cycle_hue_listeners();}else
alert("do not recognise cycle hue mode '"+mode+"'");}function cycle_hue_init(){iterate_hue();add_cycle_hue_listeners();}cycle_hue_init();start_cycling_hue();function is_open_brace(c){return/^({|\[|\()/['test'](c);}function is_close_brace(c){return/^(}|]|\))/['test'](c);}function is_brace(c){return/^({|}|\[|]|\(|\))/['test'](c);}function is_inline_whitespace(c){return/^(' '|\t)/['test'](c);}function is_whitespace(c){return/^(\s)/['test'](c);}function is_alphabetical(c){return/^(\w)/['test'](c);}function is_numerical(c){return/^(\d)/['test'](c);}function is_alphanumeric(c){return/^(\d|\w)/['test'](c);}function is_c_var_name_char(c,is_start){return is_start?/^(\d|\w|_)/['test'](c):/^(\w|_)/['test'](c);}function is_var_name_char(c,is_start){return is_start?/^(\d|\w|_|-)/['test'](c):/^(\w|_|-)/['test'](c);}function is_selector_char(c){return/^(\d|\s|\w|_|-|,|\.|#|\*|\[|]|\\|'|"|=|:|>|\||\^|$|\+|~)/['test'](c);}(function(root,factory){if(typeof define==='function'&&define.amd){define(['exports'],factory);}else if(typeof exports!=='undefined'){factory(exports);}else {factory((root.microlight={}));}}(this,function(exports){var _window=window,_document=document,appendChild='appendChild',test='test',textShadow=';text-shadow:',opacity='opacity:.',_0px_0px=' 0px 0px ',_3px_0px_5='3px 0px 5',brace=')',is_escaped=0,is_char=0,is_str=0,is_regex=0,is_at_fn=0,html_tag_open=0,is_html_tag=0,is_property=0,is_selector=0,is_dollar_var=0,is_tag_name=0,brace_depth=0,valid_braces=1,braces=[],keyword_type=0,colors=[0,3,6,9,1,4,7,10,2,5,8],i,el,cl;var reset=function(microlighted){for(i=0;el=microlighted[i++];){cl=el.classList;is_escaped=is_char=is_str=is_regex=is_at_fn=html_tag_open=is_html_tag=is_property=is_dollar_var=is_tag_name=0;valid_braces=1;braces=[];brace_depth=0;keyword_type=0;var text=el.textContent,pos=0,next1=text[0],chr=1,prev1,prev2,token=el.innerHTML='',tokenType=0,lastTokenType,multichar,node;while(prev2=prev1,prev1=tokenType<7&&prev1=='\\'?1:chr){chr=next1;next1=text[++pos];multichar=token.length>1;if(!chr||(tokenType>8&&chr=='\n')||[prev1=='$'||/\S/[test](chr),1,1,!/[$\w]/[test](chr)||(/[\d]/[test](prev1)&&!/[$\d]/[test](chr)),(prev1=='/'||prev1=='\n')&&multichar,prev1=='"'&&multichar,prev1=="'"&&multichar,text[pos-4]+prev2+prev1=='-->',prev2+prev1=='*/'][tokenType]){if(token){el[appendChild](node=_document.createElement('span')).setAttribute('style',[is_tag_name?valid_braces?"color: var(--rnbw-color-"+colors[brace_depth%colors.length]+")":'color:var(--bg-content);background:var(--sorbet-red);padding:1px 0px 2px 0px;-webkit-box-decoration-break:clone;box-decoration-break:clone;':is_html_tag?"color: var(--rnbw-color-11)":is_dollar_var||prev1=='$'?"color:var(--neon-orange)":is_at_fn||prev1=='@'||chr=='@'?"color:var(--neon-pink)":chr=='('?"color:var(--sorbet-orange)":chr=='['?"color:var(--sorbet-green)":/^(auto|let|var)$/[test](token)?"color:var(--sorbet-cyan)":/^(b(ool(|ean))|char|double|int(|eger)|num|s(ize_t|tring))$/[test](token)?"color:var(--sorbet-light-blue)":/^(do|el(se|if)|for(|each)|if|switch|while)$/[test](token)?"color:var(--sorbet-indigo)":/^(main)$/[test](token)?"color:var(--sorbet-orange)":is_selector||chr=='{'||next1=='{'||text[pos+1]=='{'?"color:var(--rnbw-color-"+colors[(brace_depth+2)%colors.length]+")":chr==':'||next1==':'||text[pos+1]==':'||is_property?"color:var(--rnbw-color-"+colors[(brace_depth+4)%colors.length]+")":'color:#c2a344','color:var(--sorbet-violet);',brace_depth<0||!valid_braces?'color:var(--bg-content);background:var(--sorbet-red);padding:1px 0px 2px 0px;-webkit-box-decoration-break:clone;box-decoration-break:clone;':'color:'+(is_brace(prev1)||(prev1=='<'&&is_html_tag)||(prev1=='>'&&is_html_tag)||(prev1=='/'&&prev2=='<')?"var(--rnbw-color-"+colors[brace_depth%colors.length]+")":prev1=='-'&&chr.match(/^[0-9]+$/)?"var(--rnbw-color-4)":"#7132a8")+';',(is_str||prev1=='"')?'color:var(--sorbet-lime);':'color:var(--sherbet-blue);','color: var(--rnbw-color-10)','color:#9e9e9e;','color: black;'][!tokenType?0:tokenType<3?2:tokenType==11?6:tokenType>6&&tokenType<11?5:tokenType>3?3:/^\d+$/[test](token)?4:+/^(a(bstract|lias|nd|rguments|rray|s(m|sert)?)|b(ase|egin|reak|yte)|c(ase|atch|hecked|lass|lone|ompl|onst|ontinue|out)|de(bugger|cimal|clare|f(ault)?|init|l(egate|ete)?)|e(cho|nd(l)?|nsure|vent|x(cept|ec|p(licit|ort)|te(nds|nsion|rn)))|f(allthrough|alse|inal(ly)?|ixed|loat|riend|rom|unc(tion)?)|global|goto|guard|i(mp(lements|licit|ort)|n(sert|clude(_once)?|out|stanceof|t(erface|ernal))?|s)|l(ambda|ock|ong)|m(icrolight|odule|utable)|NaN|n(amespace|ative|ext|ew|il|ot|ull)|o(bject|perator|r|ut|verride)|p(ackage|arams|rivate|rotected|rotocol|ublic)|r(aise|e(adonly|do|f|gister|peat|quire(_once)?|scue|strict|try|turn))|s(byte|ealed|elf|hort|igned|izeof|tatic|td|truct|ubscript|uper|ynchronized)|t(emplate|hen|his|hrows?|ransient|rue|ry|ype(alias|def|id|name|of))|u(n(checked|def(ined)?|ion|less|signed|til)|se|sing)|v(ar|irtual|oid|olatile)|w(char_t|hen|here|ith)|xor|yield)$/[test](token)]);node[appendChild](_document.createTextNode(token));}lastTokenType=(tokenType&&tokenType<7)?tokenType:lastTokenType;token='';keyword_type=0;valid_braces=true;tokenType=11;while(![1,/[/{[(%\-+*=<:;|\\.,?!&@~]/[test](chr),/[}\])>]/[test](chr),/[\w]/[test](chr)||/[@\w]/[test](chr),chr=='/'&&!is_str&&(lastTokenType<3)&&prev1!='<'&&prev1!='\\',chr=='"',chr=="'",chr+next1+text[pos+1]+text[pos+2]=='<!--',chr+next1=='/*',chr+next1=='//',chr=='#'][--tokenType]);}if(!is_str&&!is_regex&&is_open_brace(prev1)){++brace_depth;braces.push(prev1);}if(!is_str&&!is_regex&&is_close_brace(chr)){--brace_depth;valid_braces=((chr=='}'&&braces[brace_depth]=='{')||(chr==']'&&braces[brace_depth]=='[')||(chr==')'&&braces[brace_depth]=='('));braces.pop();}if(is_escaped)is_escaped=0;else if(prev1=='\\')is_escaped=1;if(!is_escaped&&!is_str&&chr=="'")is_char=!is_char;if(!is_escaped&&!is_char&&chr=='"')is_str=!is_str;if(!is_str&&chr=='/'&&(lastTokenType<3||is_regex)&&prev1!='<')is_regex=!is_regex;if(prev1=='@'&&!is_whitespace(chr)&&!is_brace(chr))is_at_fn=1;else if(is_at_fn&&(is_whitespace(chr)||is_brace(chr)))is_at_fn=0;if(prev1=='$'&&!is_whitespace(chr)&&!is_brace(chr)&&!('0'<=chr&&chr<='9'))is_dollar_var=1;else if(is_dollar_var&&(is_whitespace(chr)||is_brace(chr)))is_dollar_var=0;if(is_tag_name&&(is_whitespace(chr)||is_brace(chr)))is_tag_name=0;if(is_selector&&next1=='{')is_selector=0;else if(!is_selector&&/^(\s|,|\.|:|-|>|~|\+)/['test'](next1)){for(let p=pos+1;p<text.length;++p){if(text[p]=='{'){is_selector=1;break}else if(!is_selector_char(text[p])){break}}}if(is_property&&next1==':')is_property=0;else if(!is_property&&next1=="-"){for(let p=pos+1;p<text.length;++p){if(text[p]==':'){is_property=1;break}else if(!('a'<=text[p]&&text[p]<='z')&&!('A'<=text[p]&&text[p]<='Z')&&!is_whitespace(text[p])&&text[p]!='-')break}}if(is_html_tag&&prev1=='>'){is_html_tag=0;is_tag_name=0;if(html_tag_open){++brace_depth;braces.push('<');}}if(chr=='<'){if(next1=='/'){is_html_tag=1;is_tag_name=1;html_tag_open=0;--brace_depth;valid_braces=(braces[brace_depth]=='<');braces.pop();}else if(/^(\w|!)/[test](next1)){let depth=0;let x=pos+1;for(;x<text.length;++x){if(!depth&&text[x]=='>'){is_html_tag=1;html_tag_open=1;is_tag_name=1;break}else if(/^("|')/[test](text[x])){let end_quote=text[x];while(++x<text.length&&text[x]!=end_quote)if(text[x]=='\\')++x}else if(/^(;|}|])/[test](text[x]))break;else if(/^({|<|\[)/[test](text[x]))++depth;else if(/^(}|>|])/[test](text[x]))--depth}if(x==text.length){is_html_tag=1;html_tag_open=1;is_tag_name=1}}}token+=chr}}};var reset_id=function(id){reset([_document.getElementById(id)]);};exports.reset=reset;exports.reset_id=reset_id;if(_document.readyState=='complete'){reset(_document.getElementsByClassName("microlight"));}else {_window.addEventListener('load',function(){reset(_document.getElementsByClassName("microlight"))},0);}}));let editor_container=document.getElementById("editor-container");let editor_content=document.getElementById("editor-content");let editor=document.getElementById('editor');let pos=0,length=0,line_no=0,no_lines=1;const bsKey=8,tabKey=9,enterKey=13,shiftKey=16,ctrlKey=17,altKey=18,capsKey=20,escKey=27,leftKey=37,upKey=38,rightKey=39,downKey=40,insertKey=45,delKey=46,metaKey=91;function new_editor_content_size(){editor.style.marginTop=-(editor_content.clientHeight)+"px"}new ResizeObserver(()=>new_editor_content_size()).observe(editor_content);function redraw_editor(){editor_content.innerHTML=editor.innerText.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll("-","&#8288;-&#8288;").replaceAll("\n\n","\n")+'\n';microlight.reset([editor_content]);}editor.innerHTML=editor.innerText.replaceAll("\n\n","<div><br></div>").replaceAll("\n","<div></div>")+'<div><br></div>';redraw_editor();function insert_tab(){if(!window.getSelection)return;const sel=window.getSelection();if(!sel.rangeCount)return;const range=sel.getRangeAt(0);range.collapse(true);const span=document.createElement('span');span.appendChild(document.createTextNode('\t'));span.style.whiteSpace='pre';range.insertNode(span);range.setStartAfter(span);range.collapse(true);sel.removeAllRanges();sel.addRange(range);}function key_press_old(e){let key=e.keyCode;if(key==tabKey){e.preventDefault();insert_tab();}redraw_editor();}const mantis_editor=document.getElementById("mantis-editor");mantis_editor.innerHTML=mantis_editor.innerText+'\n';function key_press(e){switch(e.keyCode){case upKey:return;case downKey:return;case leftKey:return;case rightKey:return;case shiftKey:return;case ctrlKey:return;case metaKey:return;case altKey:return;case capsKey:return;case escKey:return}if(!window.getSelection)return;const sel=window.getSelection();let currentNode=sel.focusNode.parentNode;let to_check=[mantis_editor];let pos=sel.focusOffset,childNo=0;for(let i=0;i<to_check.length;++i){for(let n=0;n<to_check[i].childNodes.length;++n){if(to_check[i].childNodes[n]==sel.focusNode){i=to_check.length;break}if(to_check[i].childNodes[n].nodeType==3){pos+=to_check[i].childNodes[n].textContent.length}else {if(to_check[i].childNodes[n].childNodes.length)to_check.push(to_check[i].childNodes[n]);else
++pos}}}e.preventDefault();let txt=mantis_editor.innerText;switch(e.keyCode){case bsKey:if(!pos)return;--pos;if(pos<txt.length)mantis_editor.innerHTML=txt.slice(0,pos)+txt.slice(pos+1);else
mantis_editor.innerHTML=txt.slice(0,pos);break;case tabKey:if(pos<txt.length)mantis_editor.innerHTML=txt.slice(0,pos)+'\t'+txt.slice(pos);else
mantis_editor.innerHTML=txt.slice(0,pos)+'\t';++pos;break;case enterKey:if(pos<txt.length)mantis_editor.innerHTML=txt.slice(0,pos)+'\n'+txt.slice(pos);else
mantis_editor.innerHTML=txt.slice(0,pos)+'\n';++pos;break;default:if(pos<txt.length)mantis_editor.innerHTML=txt.slice(0,pos)+e.key+txt.slice(pos);else
mantis_editor.innerHTML=txt.slice(0,pos)+e.key;++pos}microlight.reset([mantis_editor]);if(!sel.rangeCount)return;const range=sel.getRangeAt(0);to_check=[mantis_editor];for(let i=0;i<to_check.length;++i){for(let n=0;n<to_check[i].childNodes.length;++n){if(to_check[i].childNodes[n].nodeType==3){if(pos<to_check[i].childNodes[n].length){if(e.keyCode==leftKey){range.setStart(to_check[i].childNodes[n],pos);range.setEnd(to_check[i].childNodes[n],pos);}else
range.setStart(to_check[i].childNodes[n],pos);i=to_check.length;break}else
pos-=to_check[i].childNodes[n].textContent.length}else {if(to_check[i].childNodes[n].childNodes.length)to_check.push(to_check[i].childNodes[n]);else if(pos)--pos;else {if(e.keyCode==leftKey){range.setStart(to_check[i].childNodes[n],0);range.setEnd(to_check[i].childNodes[n],0);}else
range.setStart(to_check[i].childNodes[n],0);i=to_check.length;break}}}}sel.removeAllRanges();sel.addRange(range);}